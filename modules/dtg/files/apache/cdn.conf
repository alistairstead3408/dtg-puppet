<VirtualHost *:8080>
        ServerName cdn.dtg.cl.cam.ac.uk
        
        DocumentRoot /var/www
        <Directory /var/www/vendor>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all        
        </Directory>

        DirectoryIndex index.html

        # Don't use etags for these file extensions - improves caching.
        <FilesMatch "\.(ico|js|css)(\.gz)?$">
                Header unset ETag
                FileETag None
        </FilesMatch>

        Header add Access-Control-Allow-Headers "origin, x-requested-with, content-type"
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, HEAD, OPTIONS"
        Header set Access-Control-Allow-Credentials "true"
        Header set X-UA-Compatible "IE=Edge"

        # setup isaac cache control headers
        ExpiresActive on
        ExpiresByType image/gif "access plus 6 months"
        ExpiresByType image/jpeg "access plus 6 months"
        ExpiresByType image/png "access plus 6 months"
        ExpiresByType image/svg+xml "access plus 6 months"
        
        ExpiresByType font/truetype             "access plus 1 year"
        ExpiresByType font/opentype             "access plus 1 year"
        ExpiresByType application/x-font-woff   "access plus 1 year"
        ExpiresByType application/vnd.ms-fontobject "access plus 1 year"

        ExpiresByType text/css "access plus 1 month"
        
        ExpiresByType text/js "access plus 6 months"
        ExpiresByType text/javascript "access plus 6 months"
        ExpiresByType application/javascript "access plus 6 months"
        ExpiresByType application/x-javascript "access plus 6 months"

        AddCharset utf-8 .html .css .txt .js

        ErrorLog /var/log/apache2/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog /var/log/apache2/access.log combined

</VirtualHost>

SetEnvIf X-Forwarded-Proto "^https$" HTTPS=on
<VirtualHost *:8443>
    ServerName cdn.dtg.cl.cam.ac.uk
    DocumentRoot /var/www

#   SSLEngine On
#   SSLCertificateFile /etc/apache2/ssl/certificate.crt
#   SSLCertificateKeyFile /etc/apache2/ssl/certificate.key
#   SSLCertificateChainFile /etc/apache2/ssl/certificate.pem
#   SSLVerifyClient None

    <Directory /var/www/site>
        AllowOverride None
    </Directory>
    
</VirtualHost>